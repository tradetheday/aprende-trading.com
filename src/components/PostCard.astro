---
interface Props {
	title: string;
	description?: string;
	pubDate: Date;
	heroImage?: { src: string };
	extractedImage?: string;
	url: string;
	size?: 'small' | 'medium' | 'large';
}

const { title, description, pubDate, heroImage, extractedImage, url, size = 'medium' } = Astro.props;

const formattedDate = pubDate.toLocaleDateString('es-ES', {
	year: 'numeric',
	month: 'short',
	day: 'numeric'
});

// Use heroImage if available, otherwise fall back to extracted image
const imageSrc = heroImage?.src || extractedImage;
---

<article class={`mh-post-card mh-post-${size}`}>
	{imageSrc && (
		<a href={url} class="mh-post-thumb">
			<img src={imageSrc} alt={title} loading="lazy" />
		</a>
	)}
	<div class="mh-post-content">
		<span class="mh-post-date">{formattedDate}</span>
		<h3 class="mh-post-title">
			<a href={url}>{title}</a>
		</h3>
		{size !== 'small' && description && (
			<p class="mh-post-excerpt">{description}</p>
		)}
	</div>
</article>

<style>
	.mh-post-card {
		background: var(--white);
		margin-bottom: 20px;
	}

	.mh-post-thumb {
		display: block;
		overflow: hidden;
		margin-bottom: 15px;
	}

	.mh-post-thumb img {
		width: 100%;
		height: auto;
		transition: 0.25s ease-out;
	}

	.mh-post-thumb:hover img {
		transform: scale(1.03);
	}

	.mh-post-content {
		padding: 0;
	}

	.mh-post-date {
		display: block;
		font-size: 11px;
		color: var(--gray-light);
		margin-bottom: 8px;
		text-transform: uppercase;
	}

	.mh-post-title {
		font-size: 18px;
		font-weight: 700;
		line-height: 1.3;
		margin: 0 0 10px 0;
	}

	.mh-post-title a {
		color: var(--black);
		transition: 0.25s ease-out;
	}

	.mh-post-title a:hover {
		color: var(--primary);
	}

	.mh-post-excerpt {
		font-size: 13px;
		line-height: 1.6;
		color: var(--gray);
		margin: 0;
	}

	/* Large Size */
	.mh-post-large .mh-post-title {
		font-size: 24px;
	}

	.mh-post-large .mh-post-excerpt {
		font-size: 14px;
	}

	/* Small Size */
	.mh-post-small {
		display: flex;
		gap: 15px;
		margin-bottom: 15px;
		padding-bottom: 15px;
		border-bottom: 1px solid var(--gray-lighter);
	}

	.mh-post-small:last-child {
		margin-bottom: 0;
		padding-bottom: 0;
		border-bottom: none;
	}

	.mh-post-small .mh-post-thumb {
		flex-shrink: 0;
		width: 80px;
		height: 60px;
		margin-bottom: 0;
	}

	.mh-post-small .mh-post-thumb img {
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	.mh-post-small .mh-post-title {
		font-size: 13px;
		margin-bottom: 5px;
	}

	.mh-post-small .mh-post-date {
		margin-bottom: 5px;
	}
</style>
