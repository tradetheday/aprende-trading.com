---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro';
import Sidebar from '../components/Sidebar.astro';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;

const formattedDate = pubDate.toLocaleDateString('es-ES', {
	year: 'numeric',
	month: 'long',
	day: 'numeric'
});

const formattedUpdate = updatedDate?.toLocaleDateString('es-ES', {
	year: 'numeric',
	month: 'long',
	day: 'numeric'
});
---

<html lang="es">
	<head>
		<BaseHead title={title} description={description} />
	</head>

	<body>
		<Header />

		<div class="mh-container-outer">
			<div class="mh-container">
				<main class="mh-wrapper">
					<!-- Main Content Area -->
					<div class="mh-main-area mh-row">
						<!-- Content Column -->
						<div class="mh-content">
							<article class="mh-article">
								<!-- Article Header -->
								<header class="mh-entry-header">
									<h1 class="mh-entry-title">{title}</h1>
									<div class="mh-entry-meta">
										<span class="mh-meta-date">{formattedDate}</span>
										{updatedDate && (
											<span class="mh-meta-updated">
												• Actualizado: {formattedUpdate}
											</span>
										)}
									</div>
									{description && <p class="mh-entry-description">{description}</p>}
								</header>

								<!-- Hero Image -->
								{heroImage && (
									<div class="mh-entry-thumbnail">
										<Image width={1030} height={438} src={heroImage} alt={title} />
									</div>
								)}

								<!-- Article Content -->
								<div class="mh-entry-content">
									<slot />
								</div>

								<!-- Article Footer -->
								<footer class="mh-entry-footer">
									<a href="/blog" class="mh-back-link">← Volver a Artículos</a>
								</footer>
							</article>
						</div>

						<!-- Sidebar -->
						<div class="mh-sidebar-wrap">
							<Sidebar />
						</div>
					</div>
				</main>
			</div>
		</div>

		<Footer />
	</body>
</html>

<style>
	/* Main Area Layout */
	.mh-main-area {
		display: flex;
		gap: var(--gutter);
	}

	.mh-content {
		flex: 1;
		min-width: 0;
	}

	.mh-sidebar-wrap {
		width: var(--sidebar-width);
		flex-shrink: 0;
	}

	/* Article */
	.mh-article {
		background: var(--white);
	}

	/* Entry Header */
	.mh-entry-header {
		margin-bottom: 25px;
		padding-bottom: 20px;
		border-bottom: 1px solid var(--gray-lighter);
	}

	.mh-entry-title {
		font-size: 28px;
		line-height: 1.3;
		margin: 0 0 15px 0;
		color: var(--black);
	}

	.mh-entry-meta {
		font-size: 13px;
		color: var(--gray-light);
		margin-bottom: 15px;
	}

	.mh-meta-updated {
		color: var(--gray-light);
		font-style: italic;
	}

	.mh-entry-description {
		font-size: 16px;
		color: var(--gray);
		line-height: 1.6;
		margin: 0;
	}

	/* Entry Thumbnail */
	.mh-entry-thumbnail {
		margin-bottom: 25px;
	}

	.mh-entry-thumbnail img {
		width: 100%;
		height: auto;
	}

	/* Entry Content */
	.mh-entry-content {
		margin-bottom: 25px;
	}

	.mh-entry-content :global(h2) {
		font-size: 22px;
		margin-top: 30px;
		margin-bottom: 15px;
		padding-bottom: 10px;
		border-bottom: 3px solid var(--primary);
		color: var(--black);
	}

	.mh-entry-content :global(h3) {
		font-size: 18px;
		margin-top: 25px;
		margin-bottom: 12px;
		color: var(--black);
	}

	.mh-entry-content :global(h4) {
		font-size: 16px;
		margin-top: 20px;
		margin-bottom: 10px;
		color: var(--black);
	}

	.mh-entry-content :global(p) {
		line-height: 1.7;
		margin-bottom: 20px;
		color: var(--black);
	}

	.mh-entry-content :global(img) {
		margin: 20px 0;
		max-width: 100%;
		height: auto;
	}

	.mh-entry-content :global(ul),
	.mh-entry-content :global(ol) {
		margin: 20px 0 20px 40px;
		line-height: 1.7;
	}

	.mh-entry-content :global(li) {
		margin-bottom: 8px;
	}

	.mh-entry-content :global(blockquote) {
		margin: 25px 0;
		padding: 10px 0 10px 20px;
		background: none;
		border-left: 5px solid var(--primary);
		font-style: italic;
		color: var(--gray);
	}

	.mh-entry-content :global(blockquote p) {
		margin: 0;
		color: var(--gray);
	}

	.mh-entry-content :global(a) {
		color: var(--primary);
		font-weight: 600;
	}

	.mh-entry-content :global(a:hover) {
		text-decoration: underline;
	}

	.mh-entry-content :global(strong) {
		color: var(--black);
		font-weight: 700;
	}

	.mh-entry-content :global(table) {
		width: 100%;
		margin: 25px 0;
		border-collapse: collapse;
	}

	.mh-entry-content :global(th),
	.mh-entry-content :global(td) {
		padding: 12px 15px;
		text-align: left;
		border-bottom: 1px solid var(--gray-lighter);
	}

	.mh-entry-content :global(th) {
		background: var(--gray-bg);
		font-weight: 700;
		color: var(--black);
	}

	/* Entry Footer */
	.mh-entry-footer {
		padding-top: 25px;
		border-top: 1px solid var(--gray-lighter);
	}

	.mh-back-link {
		display: inline-block;
		font-weight: 700;
		font-size: 13px;
		color: var(--primary);
		text-transform: uppercase;
	}

	.mh-back-link:hover {
		color: var(--black);
	}

	/* Responsive */
	@media (max-width: 900px) {
		.mh-main-area {
			flex-direction: column;
		}

		.mh-sidebar-wrap {
			width: 100%;
		}
	}

	@media (max-width: 600px) {
		.mh-entry-title {
			font-size: 22px;
		}

		.mh-entry-content :global(h2) {
			font-size: 18px;
		}

		.mh-entry-content :global(h3) {
			font-size: 16px;
		}

		.mh-entry-content :global(ul),
		.mh-entry-content :global(ol) {
			margin-left: 20px;
		}
	}
</style>
